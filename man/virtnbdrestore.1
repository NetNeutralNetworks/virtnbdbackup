.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.48.1.
.TH VIRTNBDRESTORE "1" "November 2022" "virtnbdrestore 1.9.7" "User Commands"
.SH NAME
virtnbdrestore \- restore utility for libvirt
.SH DESCRIPTION
usage: virtnbdrestore [\-h] [\-a {dump,restore}] \fB\-i\fR INPUT \fB\-o\fR OUTPUT [\-u UNTIL]
.TP
[\-s SEQUENCE] [\-d DISK] [\-n] [\-f SOCKETFILE] [\-r] [\-c]
[\-D] [\-N NAME] [\-U URI] [\-\-user USER]
[\-\-ssh\-user SSH_USER] [\-\-password PASSWORD]
[\-P NBD_PORT] [\-I NBD_IP] [\-\-tls] [\-\-tls\-cert TLS_CERT]
[\-L LOGFILE] [\-v] [\-V]
.PP
Restore virtual machine disks
.SS "optional arguments:"
.TP
\fB\-h\fR, \fB\-\-help\fR
show this help message and exit
.SS "General options:"
.TP
\fB\-a\fR {dump,restore}, \fB\-\-action\fR {dump,restore}
Action to perform: (default: restore)
.TP
\fB\-i\fR INPUT, \fB\-\-input\fR INPUT
Directory including a backup set
.TP
\fB\-o\fR OUTPUT, \fB\-\-output\fR OUTPUT
Restore target directory
.TP
\fB\-u\fR UNTIL, \fB\-\-until\fR UNTIL
Restore only until checkpoint, point in time restore.
.TP
\fB\-s\fR SEQUENCE, \fB\-\-sequence\fR SEQUENCE
Restore image based on specified backup files.
.TP
\fB\-d\fR DISK, \fB\-\-disk\fR DISK
Process only disk matching target dev name. (default: None)
.TP
\fB\-n\fR, \fB\-\-noprogress\fR
Disable progress bar
.TP
\fB\-f\fR SOCKETFILE, \fB\-\-socketfile\fR SOCKETFILE
Use specified file for NBD Server socket (default: \fI\,/var/tmp/virtnbdbackup.6319\/\fP)
.TP
\fB\-r\fR, \fB\-\-raw\fR
Copy raw images as is during restore. (default: False)
.TP
\fB\-c\fR, \fB\-\-adjust\-config\fR
Adjust vm configuration during restore. (default: False)
.TP
\fB\-D\fR, \fB\-\-define\fR
Register/define VM after restore. (default: False)
.TP
\fB\-N\fR NAME, \fB\-\-name\fR NAME
Define restored domain with specified name
.SS "Remote Restore options:"
.TP
\fB\-U\fR URI, \fB\-\-uri\fR URI
Libvirt connection URI. (default: qemu:///session)
.TP
\fB\-\-user\fR USER
User to authenticate against libvirtd. (default: None)
.TP
\fB\-\-ssh\-user\fR SSH_USER
User to authenticate against remote sshd: used for remote copy of files. (default: abi)
.TP
\fB\-\-password\fR PASSWORD
Password to authenticate against libvirtd. (default: None)
.TP
\fB\-P\fR NBD_PORT, \fB\-\-nbd\-port\fR NBD_PORT
Port used by remote NDB Service, should be unique for each started backup. (default: 10809)
.TP
\fB\-I\fR NBD_IP, \fB\-\-nbd\-ip\fR NBD_IP
IP used to bind remote NBD service on (default: hostname returned by libvirtd)
.TP
\fB\-\-tls\fR
Enable and use TLS for NBD connection. (default: False)
.TP
\fB\-\-tls\-cert\fR TLS_CERT
Path to TLS certificates used during offline backup and restore. (default: /etc/pki/qemu/)
.SS "Logging options:"
.TP
\fB\-L\fR LOGFILE, \fB\-\-logfile\fR LOGFILE
Path to Logfile (default: \fI\,/home/abi/virtnbdrestore.log\/\fP)
.SS "Debug options:"
.TP
\fB\-v\fR, \fB\-\-verbose\fR
Enable debug output
.TP
\fB\-V\fR, \fB\-\-version\fR
Show version and exit
.SH EXAMPLES
.IP
# Dump backup metadata:
.IP
virtnbdrestore \-i /backup/ \-o dump
.IP
# Complete restore with all disks:
.IP
virtnbdrestore \-i /backup/ \-o /target
.IP
# Complete restore, adjust config and redefine vm after restore:
.IP
virtnbdrestore \-cD \-i /backup/ \-o /target
.IP
# Complete restore, adjust config and redefine vm with name 'foo':
.IP
virtnbdrestore \-cD \-\-name foo \-i /backup/ \-o /target
.IP
# Restore only disk 'vda':
.IP
virtnbdrestore \-i /backup/ \-o /target \-d vda
.IP
# Point in time restore:
.IP
virtnbdrestore \-i /backup/ \-o /target \-\-until virtnbdbackup.2
.IP
# Restore and process specific file sequence:
.IP
virtnbdrestore \-i /backup/ \-o /target \-\-sequence vdb.full.data,vdb.inc.virtnbdbackup.1.data
.IP
# Restore to remote system:
.IP
virtnbdrestore \-U qemu+ssh://root@remotehost/system \-\-ssh\-user root \-i /backup/ \-o /remote_target
